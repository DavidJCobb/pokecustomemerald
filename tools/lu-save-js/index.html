<!doctype html>
<html>
   <head>
      <title>Bitpacked save dumper</title>
      <link rel="stylesheet" href="index.css" />
      <script>
console.assert = function(condition, ...args) {
   if (condition)
      return;
   console.log(...args);
   throw new Error("Assertion failed. ", ...args); // actually halt execution
};
      </script>
      
      <script src="c-value.js"></script>
      <script src="c-struct.js"></script>
      <script src="c-union.js"></script>
      <script src="c-value-path.js"></script>
      <script src="c-bitpack-options.js"></script>
      <script src="instructions.js"></script>
      <script src="save-format.js"></script>
      
      <!-- helper for pasting `charmap.txt` in and getting something usable -->
      <script src="parse-charset.js"></script>
      
      <script src="charset.js"></script>
      <script src="bitstream.js"></script>
      <script src="instructions-applier.js"></script>
      
      <script src="c-view-element.js"></script>
   </head>
   <body>
      <h1>Bitpacked save dumper</h1>
      <p>
         Given an XML file which describes a bitpacked save format, and an emulator SAV file made with that format, this page is intended to dump the contents of that save file.
      </p>
      <div class="form">
         <label for="file-xml">Save file format (XML):</label>
         <input type="file" id="file-xml" />
         
         <label for="file-sav">Save file (SAV):</label>
         <input type="file" id="file-sav" />
         
         <button data-action="load">Load</button>
         <button data-action="roundtrip">Test round-trip load-and-save</button>
      </div>
      <section class="slot" data-slot-id="1">
         <aside>
            <span class="field" data-field="version">
               <label>Version:</label>
               <span class="value"></span>
            </span>
            <span class="field" data-field="counter">
               <label>Counter:</label>
               <span class="value"></span>
            </span>
            <span class="field">
               <label>Sectors:</label>
               <ul class="sectors"></ul>
            </span>
         </aside>
      </section>
      <section class="slot" data-slot-id="2">
         <aside>
            <span class="field" data-field="version">
               <label>Version:</label>
               <span class="value"></span>
            </span>
            <span class="field" data-field="counter">
               <label>Counter:</label>
               <span class="value"></span>
            </span>
            <span class="field">
               <label>Sectors:</label>
               <ul class="sectors"></ul>
            </span>
         </aside>
      </section>
      <script src="index.js"></script>
   </body>
</html>