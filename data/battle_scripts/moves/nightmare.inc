BattleScript_EffectNightmare::
	attackcanceler
	ppreduce
	jumpifstatus2 BS_TARGET, STATUS2_SUBSTITUTE, BattleScript_Failed_AtkStringNoPPReduce
	jumpifstatus2 BS_TARGET, STATUS2_NIGHTMARE, BattleScript_Failed_AtkStringNoPPReduce
	jumpifstatus BS_TARGET, STATUS1_SLEEP, BattleScript_NightmareWorked
	goto BattleScript_Failed_AtkStringNoPPReduce
BattleScript_NightmareWorked::
	attackstringandanimation
	waitanimation
	setmoveeffect MOVE_EFFECT_NIGHTMARE
	seteffectprimary
	printstring STRINGID_PKMNFELLINTONIGHTMARE
	waitmessage B_WAIT_TIME_LONG
	goto BattleScript_MoveEnd
